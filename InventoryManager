using System.Collections.Generic;
using UnityEngine;

public class InventoryManager : MonoBehaviour
{
    public static InventoryManager I { get; private set; }

    private Dictionary<string, int> gemCounts = new Dictionary<string, int>();

    private void Awake()
    {
        if (I != null && I != this) { Destroy(gameObject); return; }
        I = this;
        DontDestroyOnLoad(gameObject);
    }

    public void AddGem(GemData gem, int amount = 1)
    {
        if (gem == null) return;

        if (!gemCounts.ContainsKey(gem.gemId))
            gemCounts[gem.gemId] = 0;

        gemCounts[gem.gemId] += amount;

        Debug.Log($"[Inventory] +{amount} {gem.displayName} (id={gem.gemId}) -> total = {gemCounts[gem.gemId]}");
    }

    public int GetGemCount(string gemId)
    {
        return gemCounts.TryGetValue(gemId, out int c) ? c : 0;
    }
    private void Start()
    {
        Debug.Log("[InventoryManager] Ready!");
    }
}
